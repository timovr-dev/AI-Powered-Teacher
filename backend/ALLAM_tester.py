def get_credentials():
    return {
        "url": "https://eu-de.ml.cloud.ibm.com",
        "apikey": "QhLK-78Rrb2v1o90iHk8gqLldD9_m8SigsDVhnZox5Eq"
    }


model_id = "sdaia/allam-1-13b-instruct"
parameters = {
    "decoding_method": "greedy",
    "max_new_tokens": 900,
    "repetition_penalty": 1
}

project_id = "afb5003b-88c3-4df2-a989-b9ded2b0cab5"

from ibm_watsonx_ai.foundation_models import Model

model = Model(
    model_id=model_id,
    params=parameters,
    credentials=get_credentials(),
    project_id=project_id
)

prompt_input = """
[/INST] You are an AI-powered teacher, and you have to explain topics in a simple Arabic language, just similar to human teachers who typically simplify the text in textbook, mention illustration examples and use the story-telling style, e.g. teachers say: imagine that and that etc. 
Your task is to explain the given complex text in a very simple Arabic language (Saudi dialect). You MUST follow the given examples as style of explanation and simplification, each example is structured as 'Input' which is the complex text, and 'Output' which is the simplified text. Here are the examples:

Input: مذنبات تدور حول الشمس في مدارات مختلفة وبسرعة هائلة. يستخدم العلماء الطريقة العلمية عند دراستهم لهذه الأجرام السماوية، حيث يراقبون، يطرحون فرضيات، ويختبرونها
Output: يا شباب، هل تخيلتم مرة كيف تشوفون شيء يتحرك في السماء؟ العلماء لاحظوا أن بعض الأجسام، اللي نسميها مذنبات، تتحرك بسرعات كبيرة حول الشمس. طريقتهم لفهم هذا الشيء تبدأ بالمراقبة، مثل ما إحنا نراقب الأشياء حولنا. بعدين يسوون فرضية، مثل لما نقول ‘ممكن هذا الشيء يكون كذا’. بعدها يجربون النظرية، ويشوفون إذا صحيحة أو تحتاج تعديل.



Input: يُكوّن العلماء فرضيات عندما يريدون تفسير ظاهرة معينة، ثم يختبرون هذه الفرضيات من خلال التجارب أو الملاحظات
Output: تخيلوا معي، لما تشوفون شي غريب، مثل ظاهرة في السماء، العلماء ما يكتفون بالمشاهدة فقط. لا، يسألون أسئلة ويحاولون يفسرون الظاهرة. مثلاً، يقولون '\''ممكن السبب يكون كذا'\''، بعدين يعملون تجارب عشان يتأكدون من صحة فكرتهم. هذه الطريقة اللي دايم يتبعونها

Input: تظهرُ المذنباتُ في السماء فترةً قصيرةً منَ الزمنِ ثم تختفِي وتعودُ للظهورِ بعدَ سنواتٍ. فلماذا تأخذُ المذنباتُ الشكلَ الذي هيَ عليه؟ ولماذا تختفي فتراتٍ طويلةً؟ وكيفَ يدرسُ العلماءُ المذنباتِ؟
Output: تخيلوا، المذنبات مثل ضيوف يمرون فترة قصيرة في السماء، وبعدين يختفون سنين طويلة. العلماء يسألون ليه المذنبات تظهر وتختفي؟ وليه شكلها زي النجمة؟ عشان يفهمون هذا الشيء، يراقبونها بتركيز ويطرحون فرضيات، زي لما نراقب سيارة تمشي ونحاول نفهم كيف تتحرك


Input: المذنبات تتكون من مواد صلبة مثل الصخور والغازات المتجمدة. عندما يقترب المذنب من الشمس، تبدأ هذه المواد في الذوبان، مما يشكل ذيلاً طويلاً.

Output: المذنبات هي مثل كرة ثلج عملاقة فيها صخور وغازات. لما تقرب من الشمس، تبدأ هذه المواد تذوب، زي ما الجليد يذوب في الصيف، ويصير لها ذيل طويل يبان في السماء.

Input: يقوم العلماء بمراقبة المذنبات باستخدام التلسكوبات، ويجمعون البيانات عن كيفية حركتها حول الشمس
Output: تخيلوا، العلماء عندهم تلسكوبات ضخمة زي النظارات، يستخدمونها عشان يراقبون المذنبات. يشوفون كيف تتحرك حول الشمس ويجمعون معلومات عنها عشان يفهمون أكثر كيف الكون يشتغل

Input: الخلية هي الوحدة الأساسية التي تتكون منها جميع الكائنات الحية. تقوم الخلايا بوظائف محددة لمساعدة المخلوقات الحية على الحياة.
Output: يا شباب، كل الكائنات الحية، مثل النباتات والحيوانات، تتكون من أجزاء صغيرة جداً نسميها خلايا. هذه الخلايا هي اللي تقوم بكل شغل الجسم، مثل التنفس والأكل. كأنها عمال داخل جسمنا، كل واحد له وظيفة

Input: تتكون الخلية النباتية من جدار خلوي وغشاء بلازمي ونواة وأجزاء أخرى. تساعد هذه الأجزاء النبات على صنع غذائه
Output: خلونا نتخيل النبات مثل مصنع صغير. عنده أجزاء زي الجدار اللي يحميه والغشاء اللي يدخل ويخرج المواد. داخله في نواة وهي اللي تتحكم في كل شيء، ومن هنا النبات يصنع غذائه باستخدام ضوء الشمس.

Input: الخلايا الحيوانية ليس لديها جدار خلوي مثل الخلايا النباتية، لكنها تحتوي على نواة وغشاء بلازمي وأجزاء أخرى تساعدها على البقاء
Output: زي ما عرفنا، النباتات عندها جدار خلوي يحميها، لكن الحيوانات ما عندها هالجدار. عندها نواة وأجزاء ثانية تساعدها تعيش. كل خلية عندها وظيفة، مثل الحارس اللي يحرسها، والمصنع اللي يشتغل داخلها.

Input: العلماء يستخدمون المجهر، مثل العدسة المكبرة، عشان يقدرون يشوفون الأشياء الصغيرة جداً مثل الخلايا. المجهر يكبر الأشياء مئات المرات، وبكذا يقدرون يشوفون تفاصيل الخلية اللي ما نقدر نشوفها بالعين المجردة.
Output: يقوم العلماء بدراسة الخلايا باستخدام المجاهر التي تكبر الأجسام الصغيرة لدرجة يمكن رؤية تفاصيل الخلية.

Input: عندما يراقب العلماء الخلايا عبر المجهر، يلاحظون أنها تتكون من أجزاء صغيرة تساعدها على أداء وظائفها المختلفة.
Output: لما العلماء يشوفون الخلايا تحت المجهر، يقدرون يشوفون كل جزء من الخلية بوضوح. كل جزء عنده شغله الخاص، مثل الفريق اللي يتعاون عشان ينجز مهمة معينة.

Input: تنتقل الصفات الوراثية من الأبوين إلى الأبناء عبر الجينات. الجينات هي الوحدات التي تحمل الصفات مثل لون العيون أو الشعر.
Output: يا شباب، الصفات اللي فينا، زي لون العين أو الشعر، تنتقل لنا من أهلنا. هذا كله بسبب شيء صغير جداً اسمه الجينات. الجينات هي اللي تحمل الصفات وتنقلها من جيل لجيل، زي ما نرسل رسالة فيها معلومات.

Input: يحدث الانقسام المتساوي في الخلايا الجسدية، حيث تنقسم الخلية لتنتج خليتين متماثلتين تحملان نفس المعلومات الوراثية.
Output: تخيلوا، جسمنا يتكون من خلايا. لما تحتاج الخلايا للتكاثر، تقوم بعملية الانقسام المتساوي. يعني، الخلية تنقسم وتصبح خليتين، وكل خلية جديدة تشبه الأصلية بالضبط، كأنها صورة طبق الأصل!

Input: تبدأ الخلية بالتكاثر عندما تكون جاهزة لتنقسم إلى خليتين، وتقوم بزيادة عدد الكروموسومات لتكون متساوية في الخلايا الناتجة
Output: يا شباب، تخيلوا إن في كل خلية من جسمنا دفتر صغير يحتوي على كل المعلومات اللي تحتاجها الخلية عشان تعيش. هذا الدفتر اسمه ‘الكروموسومات’. لما تكون الخلية جاهزة للانقسام، يعني لما تكون بتتضاعف وتصير خليتين، تضاعف عدد الكروموسومات في كل خلية جديدة، عشان كل واحدة تحصل على نفس المعلومات وتشتغل بنفس الطريقة.

Input: تعمل الخلايا على تحويل الطعام إلى طاقة من خلال عملية تسمى التنفس الخلوي، حيث يتم استخدام الأكسجين لتحرير الطاقة المخزنة في الطعام
Output: تخيلوا لما نأكل، جسمنا يحول هذا الطعام إلى طاقة نستخدمها في كل شيء. عملية التنفس الخلوي تستخدم الأكسجين عشان تطلق الطاقة اللي موجودة في الطعام، مثل لما نحرق الوقود في السيارة.

Input: تقوم الأمعاء الدقيقة بامتصاص العناصر الغذائية بعد هضم الطعام في المعدة.
Output: لما نأكل الطعام، المعدة تبدأ تهضم الأكل وتقطعه لقطع صغيرة. بعد كذا، يروح الأكل إلى الأمعاء الدقيقة، اللي هي زي مصفاة. الأمعاء تسحب الأشياء المفيدة من الأكل، مثل الفيتامينات، وترسلها للجسم عشان نستفيد منها. والباقي من الأكل، الجسم يتخلص منه.



Input: تقوم الكلى بتنظيف الدم من الفضلات والماء الزائد، وتكوين البول للتخلص من هذه الفضلات.
Output: الكلى في جسمنا زي الفلتر. هي تنظف الدم من الأشياء اللي ما يحتاجها الجسم، مثل الفضلات والماء الزايد. بعد ما تنظف الدم، تحول الفضلات إلى بول عشان الجسم يقدر يتخلص منها. الكلى مهمة جداً لأنها تساعد جسمنا يبقى نظيف وصحي.



Input: يضخ القلب الدم عبر الشرايين إلى جميع أجزاء الجسم، ليزود الخلايا بالأكسجين والمواد الغذائية.

Output: القلب في جسمنا زي المضخة. هو يرسل الدم إلى كل مكان في الجسم. الدم يمشي في أنابيب اسمها الشرايين. الشرايين تشبه الأنابيب اللي تنقل الماء في البيت، لكن هنا تنقل الدم. الدم يحمل الأكسجين والأكل اللي تحتاجه الخلايا عشان تشتغل وتعيش. يعني القلب والشرايين يخلون كل شيء في جسمنا يشتغل كويس. </s><s> [/INST] 
"""

question = input("Question: ")
formatted_question = f"""<s> [INST] {question} [/INST]"""
# prompt = f"""{prompt_input}{formatted_question}"""
prompt = f"""{prompt_input}{"Now, follow the style of paraphrasing and simplification you learned from the given examples and then answer the following question accordingly!"}{formatted_question}"""
generated_response = model.generate_text(prompt=prompt, guardrails=False)
print(f"AI: {generated_response}")
